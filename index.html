<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Teen Patti Predator</title>
  <style>
    @import url('https://fonts.googleapis.com/css2?family=Share+Tech+Mono&display=swap');
    :root{
      --bg:#071425; --card:#0f2130; --accent:#ff2d2d; --muted:#98a8b9;
    }
    *{box-sizing:border-box}
    body{
      margin:0;
      font-family:'Share Tech Mono', monospace;
      background: url('https://iili.io/K0ZwJJR.md.jpg') no-repeat center center fixed;
      background-size: cover;
      color:#fff;
      -webkit-font-smoothing:antialiased;
      text-align:center;
    }
    .wrap{max-width:920px;margin:32px auto;padding:16px}
    header{display:flex;align-items:center;gap:14px;justify-content:center}
    .brand{width:80px;height:80px;border-radius:12px;box-shadow:0 10px 30px rgba(0,0,0,0.6)}
    h1{margin:0;font-size:22px;letter-spacing:2px;color:#ff3b3b;text-shadow:0 0 12px #ff3b3b}
    .card{background:rgba(0,0,0,0.7);padding:18px;border-radius:12px;margin:18px auto;max-width:520px;box-shadow:0 8px 30px rgba(0,0,0,0.7)}
    input, button {font-family:inherit}
    .center{display:flex;flex-direction:column;align-items:center;gap:8px}
    input[type="text"], input[type="email"], input[type="password"]{
      width:92%;padding:10px;border-radius:8px;border:1px solid rgba(255,255,255,0.06);background:transparent;color:inherit;text-align:center
    }
    button{
      padding:10px 18px;border-radius:8px;border:0;background:var(--accent);color:#fff;cursor:pointer;font-weight:700;box-shadow:0 8px 24px rgba(255,45,45,0.12)
    }
    button.ghost{background:transparent;border:1px solid rgba(255,255,255,0.06)}
    .list{margin-top:12px;text-align:left;color:#e6eef6;padding:6px;border-radius:8px;background:rgba(255,255,255,0.02)}
    .row{display:flex;gap:8px;justify-content:center;align-items:center}
    .status{margin-top:8px;color:#ffd27a;font-weight:700}
    .timer-badge{margin-top:10px;padding:8px 12px;border-radius:999px;background:rgba(255,255,255,0.03);font-weight:700;color:#ffea9a}
    /* lock overlay */
    #overlayLock{position:fixed;inset:0;background:rgba(0,0,0,0.96);display:flex;flex-direction:column;align-items:center;justify-content:center;z-index:9999}
    .lockbox{width:92%;max-width:420px;background:rgba(10,12,15,0.85);padding:20px;border-radius:12px;box-shadow:0 12px 40px rgba(0,0,0,0.7);text-align:center}
    .lock-title{font-size:20px;color:#ffd36b;margin-top:10px;text-shadow:0 0 12px #ffd36b}
    .lock-sub{color:#bfcbd6;margin-top:6px;font-size:13px}
    .small-muted{font-size:13px;color:#98a8b9;margin-top:6px}
    @media(max-width:600px){ .brand{width:60px;height:60px} .card{margin:12px} }
  </style>
</head>
<body>
  <div class="wrap">
    <header>
      <img class="brand" src="https://iili.io/K0ZwJJR.md.jpg" alt="logo">
      <h1>TEEN PATTI PREDATOR</h1>
    </header>

    <div class="card center" id="mainCard" style="display:none;">
      <div class="row" style="width:100%;justify-content:space-between;padding:0 8px;">
        <div style="text-align:left">
          <div style="font-size:13px;color:#b9d5ff">Unlocked</div>
          <div style="font-weight:800;font-size:18px">Add Account</div>
        </div>
        <div style="text-align:right">
          <div class="small-muted">Auto-lock in</div>
          <div id="countdown" class="timer-badge">05:00</div>
        </div>
      </div>

      <div style="height:8px"></div>

      <input type="text" id="accId" placeholder="ID (e.g. 278001)">
      <input type="email" id="accGmail" placeholder="Gmail (e.g. name@gmail.com)">
      <input type="text" id="accDevice" placeholder="Device (e.g. Galaxy A51)">
      <div class="row" style="margin-top:8px;width:100%;">
        <button id="btnAdd">Add</button>
        <button id="btnLockNow" class="ghost" style="margin-left:6px;background:transparent;color:#fff;border:1px solid rgba(255,255,255,0.06)">Lock Now</button>
      </div>

      <div class="list" id="accountList" aria-live="polite" style="max-height:260px;overflow:auto;margin-top:12px"></div>
      <div class="status" id="statusMsg"></div>
    </div>

    <!-- Lock overlay (initially visible) -->
    <div id="overlayLock">
      <div class="lockbox">
        <img class="brand" src="https://iili.io/K0ZwJJR.md.jpg" alt="logo">
        <div class="lock-title" id="lockTitle">🔒 Locked</div>
        <div class="lock-sub" id="lockSub">Enter password to unlock</div>

        <div style="height:12px"></div>
        <input type="password" id="unlockPwd" placeholder="Password" style="width:86%;margin:0 auto;">
        <div class="row" style="margin-top:12px">
          <button id="btnUnlock">Unlock</button>
          <button id="btnClear" class="ghost" style="margin-left:8px;background:transparent;border:1px solid rgba(255,255,255,0.06)">Clear</button>
        </div>
        <div class="small-muted" id="lockNote" style="margin-top:10px"></div>
      </div>
    </div>
  </div>

<script>
/*
Behavior:
- Initial unlock password: "JisanShadow444"
- After user unlocks, a 5-minute countdown starts.
- When time reaches 0 -> auto-lock triggers and overlay appears again.
  - For auto-lock re-unlock password use: "ShadowJisan999"
- Manual Lock Now uses the auto-lock password to re-lock (so Lock Now triggers overlay and requires ShadowJisan999 to unlock later).
- Added accounts are kept in sessionStorage for this demo (cleared on tab close). You can change to localStorage if you want persistence.
*/

const INITIAL_PWD = "JisanShadow444";
const AUTO_LOCK_PWD = "ShadowJisan999";
const AUTO_LOCK_MS = 5 * 60 * 1000;

const overlayLock = document.getElementById('overlayLock');
const btnUnlock = document.getElementById('btnUnlock');
const btnClear = document.getElementById('btnClear');
const unlockPwd = document.getElementById('unlockPwd');
const lockTitle = document.getElementById('lockTitle');
const lockSub = document.getElementById('lockSub');
const lockNote = document.getElementById('lockNote');

const mainCard = document.getElementById('mainCard');
const countdownEl = document.getElementById('countdown');
const btnAdd = document.getElementById('btnAdd');
const btnLockNow = document.getElementById('btnLockNow');
const accountList = document.getElementById('accountList');
const statusMsg = document.getElementById('statusMsg');

let countdownTimer = null;
let countdownEndsAt = 0;
let isAutoLocked = false; // when auto-locked, unlock password becomes AUTO_LOCK_PWD

// use sessionStorage so data clears when tab/browser closed; change to localStorage if persistence needed
const STORAGE_KEY = 'tp_accounts_demo_v1';

// Utility
function fmtTimeLeft(ms){
  if (ms < 0) ms = 0;
  const s = Math.floor(ms / 1000);
  const m = Math.floor(s / 60);
  const sec = s % 60;
  return `${String(m).padStart(2,'0')}:${String(sec).padStart(2,'0')}`;
}

function loadAccounts(){
  try {
    const raw = sessionStorage.getItem(STORAGE_KEY) || '[]';
    return JSON.parse(raw);
  } catch(e){ return []; }
}
function saveAccounts(list){
  sessionStorage.setItem(STORAGE_KEY, JSON.stringify(list));
}
function renderAccounts(){
  const list = loadAccounts();
  if (list.length === 0){
    accountList.innerHTML = '<div style="opacity:0.6;padding:8px">No accounts added yet</div>';
    return;
  }
  accountList.innerHTML = '';
  list.forEach((it, idx) => {
    const p = document.createElement('div');
    p.style.padding = '8px';
    p.style.borderBottom = '1px solid rgba(255,255,255,0.03)';
    p.innerHTML = `<div style="font-weight:700;color:#ffd27a">ID: ${escapeHtml(it.id)}</div>
                   <div style="color:#bfcbd6;font-size:13px">Gmail: ${escapeHtml(it.gmail)} | Device: ${escapeHtml(it.device)}</div>
                   <div style="margin-top:6px"><button data-idx="${idx}" class="removeBtn" style="padding:6px 10px;border-radius:8px;border:0;background:#ff4757;color:#fff;cursor:pointer">Remove</button></div>`;
    accountList.appendChild(p);
  });
  // attach remove handlers
  Array.from(document.getElementsByClassName('removeBtn')).forEach(btn => {
    btn.addEventListener('click', (e) => {
      const idx = Number(btn.getAttribute('data-idx'));
      const arr = loadAccounts();
      arr.splice(idx,1);
      saveAccounts(arr);
      renderAccounts();
    });
  });
}

function escapeHtml(s){
  return String(s).replace(/[&<>"]/g, c => ({'&':'&amp;','<':'&lt;','>':'&gt;','"':'&quot;'}[c]));
}

// Lock/Unlock logic
function showLockOverlay(auto=false){
  overlayLock.style.display = 'flex';
  unlockPwd.value = '';
  isAutoLocked = !!auto;
  if (auto){
    lockTitle.textContent = '🔒 Auto-Locked';
    lockSub.textContent = 'Enter auto-lock password to unlock';
    lockNote.textContent = '';
  } else {
    lockTitle.textContent = '🔒 Locked';
    lockSub.textContent = 'Enter password to unlock';
    lockNote.textContent = '';
  }
  mainCard.style.display = 'none';
  stopCountdown();
}

function hideLockOverlay(){
  overlayLock.style.display = 'none';
  mainCard.style.display = 'block';
}

function startCountdown(){
  countdownEndsAt = Date.now() + AUTO_LOCK_MS;
  updateCountdownUI();
  if (countdownTimer) clearInterval(countdownTimer);
  countdownTimer = setInterval(() => {
    updateCountdownUI();
  }, 1000);
}

function stopCountdown(){
  if (countdownTimer) { clearInterval(countdownTimer); countdownTimer = null; }
  countdownEl.textContent = fmtTimeLeft(0);
}

function updateCountdownUI(){
  const left = countdownEndsAt - Date.now();
  if (left <= 0){
    // auto-lock now
    stopCountdown();
    triggerAutoLock();
    return;
  }
  countdownEl.textContent = fmtTimeLeft(left);
}

function triggerAutoLock(){
  // show overlay and set auto-locked flag
  showLockOverlay(true);
}

function manualLockNow(){
  // When user presses Lock Now, we trigger same behaviour as auto-lock
  showLockOverlay(true);
}

// Initialization: page loads locked state initially
function init(){
  // Initially locked (use initial password)
  showLockOverlay(false);
  renderAccounts();
}

// Event handlers
btnUnlock.addEventListener('click', () => {
  const pwd = unlockPwd.value || '';
  if (!isAutoLocked){
    // initial unlock uses INITIAL_PWD
    if (pwd === INITIAL_PWD){
      hideLockOverlay();
      statusMsg.textContent = 'Unlocked';
      statusMsg.style.color = '#a8ffb0';
      startCountdown();
    } else {
      lockNote.textContent = '❌ Wrong password';
      lockNote.style.color = '#ff8b8b';
    }
  } else {
    // re-unlock after auto-lock uses AUTO_LOCK_PWD
    if (pwd === AUTO_LOCK_PWD){
      hideLockOverlay();
      statusMsg.textContent = 'Unlocked (after auto-lock)';
      statusMsg.style.color = '#a8ffb0';
      // After auto-unlock, we should restart countdown if desired.
      // We'll restart a fresh 5-minute window.
      startCountdown();
      isAutoLocked = false;
    } else {
      lockNote.textContent = '❌ Wrong auto-lock password';
      lockNote.style.color = '#ff8b8b';
    }
  }
});

btnClear.addEventListener('click', () => {
  unlockPwd.value = '';
  lockNote.textContent = '';
});

btnAdd.addEventListener('click', () => {
  const id = document.getElementById('accId').value.trim();
  const gmail = document.getElementById('accGmail').value.trim();
  const device = document.getElementById('accDevice').value.trim();
  if (!id || !gmail || !device){
    statusMsg.textContent = 'Fill all fields';
    statusMsg.style.color = '#ffd2a8';
    return;
  }
  const arr = loadAccounts();
  arr.push({ id, gmail, device, addedAt: Date.now() });
  saveAccounts(arr);
  renderAccounts();
  document.getElementById('accId').value = '';
  document.getElementById('accGmail').value = '';
  document.getElementById('accDevice').value = '';
  statusMsg.textContent = 'Added';
  statusMsg.style.color = '#a8ffb0';
});

btnLockNow.addEventListener('click', () => {
  // Immediately lock as if auto-locked
  manualLockNow();
});

// init on load
init();

// keep UI countdown accurate if user switches tabs / windows
window.addEventListener('visibilitychange', () => {
  if (!document.hidden && countdownTimer) updateCountdownUI();
});

</script>
</body>
</html>
